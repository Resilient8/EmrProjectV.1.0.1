"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.installQuasarPlugin = void 0;
const vue_1 = require("cypress/vue");
const lodash_1 = require("lodash");
const quasar_1 = require("quasar");
// Since Cypress 10 we cannot import `config` from VTU directly since Cypress bundles its own version of VTU
// See https://github.com/cypress-io/cypress/issues/22611
const { config } = vue_1.VueTestUtils;
// TODO: not properly documented into the README
// Had the css imports here for styling with CCT but as this file is exported along with commands
// the cypress E2E tests fail because they don't have loaders for css in place.
// So somehow this code is also evaluated when only importing { registerCommands } from the AE.
function installQuasarPlugin(options) {
    const globalConfigBackup = (0, lodash_1.cloneDeep)(config.global);
    // We must execute this outside a `beforeAll`
    // or `mount` calls outside `test` context (eg. called into a `describe` context and shared by multiple tests)
    // won't have those defaults applied
    config.global.plugins.unshift([quasar_1.Quasar, options]);
    after(() => {
        config.global = globalConfigBackup;
    });
}
exports.installQuasarPlugin = installQuasarPlugin;
//# sourceMappingURL=install-quasar-plugin.js.map